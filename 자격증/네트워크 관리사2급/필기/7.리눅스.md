# [ 리눅스 구조 ]

## < 커널 : kernel > 

- **하드웨어와 os 를 연결**하고 관리 
- 리눅스 그 자체를 의미

## < shell > 
- 명령어 해석기 
- Kernel 에 명령어를 해석해서 전달하는 역할을 수행 
- sw 이용하기 위해 커널 통해서 명령전달 
  - 즉, GUI 에서 사용자 입력한 값이 shell을 통해 해석되며 kernel 을 통해 하드웨어에 명령하고 화면에 출력된다. 

- bash 쉘이나 power쉘 존재 

## < Loader > 
- 운영체제를 메모리에 로드하고 실행 

## < LILO : Linux Loader >

- **리눅스 부트로더**
- 다른 운영체제와 리눅스가 공존하는 환경에서 멀티부팅 할 때 사용
- **GRUB를 기본 부트**로 사용 

## < swap 영역 > 
- 윈도우의 가상메모리와 비슷 
- 어떤 프로그램 이용할때 메모리 부족하면 하드디스크의 여유공간을 임시 메모리로 사용하는 역할을 수행 

## < /home > 
- 사용자마다 **기본적으로 제공**되는 디렉토리 
- 새로 등록한 사용자는 관리자의 제한이 없으면 해당 디렉토리 안에서만 사용 가능 

## < /lib > 
- 시스템 동작을 위한 모든 명령과 **라이브러리가 설치**되는 디렉토리 
- 커널, 모듈 이 설치됨

## < /usr > 
- **시스템, 응용프로그램**에서 필요한 파일들이 저장됨
  - 일반 사용자가 사용

- 하위로는 /bin, /sbin, /local 이 있다.
  - bin : 바이너리 (명령어)
  - sbin : 시스템 바이너리 (시스템 명령어)


## < /var > 
- 시스템 운영시 생기는 **로그파일등 임시파일 저장**되는곳  
- 시스템 로그, 스풀, 전자메일 등 크기가 계속 변하는 파일들 저장 
- 하드웨어 적 이상 유무나 cpu, 커널등의 이상유무 로그로 저장함 

## < /tmp > 
- **프로그램 운영시** 불러들여야 하는 입출력 파일이 저장됨

## < /etc > 
- **시스템 설정파일**이 있는 디렉토리
- 암호 파일 및 네트워크 파일을 관리
- 시스템의 대부분 설정 파일이 존재하는 디렉토리

## < /bin > 
- **기본 쉘 명령어**의 실행파일을 가진 디렉토리
- 기본적인 시스템 실행 파일 가진 디렉토리
- ls, cp, md 같은 명령어 
- /sbin 디렉토리와의 차이점은 /sbin은 시스템 관리자 권한이 필요한 명령어를 가진다.
- 이 안에 있는 명령어는 어떤 경로에서든지 사용가능 

## < /proc >
- **프로세스의 정보**를 확인하는 명령어
- 프로세스 상태정보, 하드웨어 정보, 시스템 정보 확인가능 

## < /dev >
- 시스템에 장착되어있는 **장치(마우스, 모니터)를 파일로 처리**하여 저장 
- 각종 디바이스 드라이버 정보 저장 한 디렉토리 
- 마운트 지점을 제공

## < etc/passwd > 
- etc 디렉터리에 생성된 계정의 정보가 저장 

1. 파일 내용 => `user1:x:500:500::/home/user1:/bin/bash `
   - user1 : 계정명
   - x : 패스워드 정보 ( etc/shadow 파일에 별도로 저장되어있음을 의미 ) 
   - 500 : UID(유저ID)
   - 500 : GID(그룹ID)
   - /home/user1 : 홈디렉토리 경로
   - /bin/bash : 기본 설정 셸 

## < etc/named.conf >
- **DNS 서버 및 존 파일 설정** 관련 파일 

## < /etc/mtab >
- 현재 **마운트** 되어져있는 정보가 저장된 파일 

## < /etc/fstab >
- 부팅시 마운트 할 만한 자원에 대한 정보 

## < 데몬 : Daemon > 
- 서버의 역할을 수행하거나 그 기능을 도와줌 
- **백그라운드로 동작**해 시스템 서비스를 지원함
- 이벤트 발생시 동작하며 서비스 제공 후 대기 상태로 전환됨 

# [ 리눅 명령어 ]

## < traceroute > 
- 최적의 라우팅 경로를 찾는다 
- 윈도우에서는 tracert 로 사용한다.

## < pkill or kill > 
- 프로세스 킬로, 프로세스 신호를 종료시키는 명령어

## < history > 
- 이전 사용했던 명령어들을 조회 

## < halt > 
- 시스템 종료 
- t 옵션 : 강제 종료 

## < poweroff > 
- 시스템 종료 
- halt -p 와 같음 

## < reboot > 
- 시스템 재부팅 
- t 옵션 : 시스템 강제 재부팅 

## < top >
- 실시간 cpu사용율, 메모리 소비율 출력 


## < last > 
- 마지막 사용자 출력 

## < nohup > 
- **백그라운드에서 동작**할 수 있게함 

## < shutdown > 
- 시스템 종료
- h (시간:분) 옵션  :  시간 후에 시스템 종료 
- r (시간:분) 옵션 : 시간 후에 시스템 재부팅 
- c 옵션 : 예약된 shutdowm 명령 취소 
- shutdown -h 10:10  = 오전 10시 10분에 시스템 종료 예약

## < runLevel의 init > 
- 런레벨과 관련있는 명령어
- init 0 : **시스템 종료**
- init 1 : **단일 사용자** 모드(윈도우 안전모드와 같음)
- init 2 : **다중 사용자** 텍스트 모드 (네트워크 사용불가)
- init 3 : 다중 사용자 텍스트 모드 ( 네트워크 사용가능)
- init 4 : x
- init 5 : 다중 그래픽 사용자 모드 ( 윈도우 **GUI**와 같음)
- init 6 : **시스템 재부팅**

## < man : manual > 
- 도움말(메뉴얼)을 볼 수 있는 명령어 

## < pwd > 
- 디렉토리 위치 

## < passwd > 
- 계정생성

## < chmod > 
- 권한설정 ( -rw-r--r-- ) 
- rw- : 소유자 
- r-- : 소유 그룹
- r-- : 기타 사용자 
  - `+`: 권한 추가 
  - = : 권한 덮어 쓰우기 
  - a : 모든 사용자 
  - u : 소유자 
  - g : 소유 그룹
  - o : 기타 사용자 

- chmod ugo+w file : 소유자, 소유그룹, 기타사용자에 대해 파일의 쓰기 권한 추가 
- chmod go=w file : 소유그룹, 기타사용자의 권한을 w만 사용할수 있도록 변경 (이전 가진 권한 지워짐)

## < netstat : network status > 
- 프로토콜 통계 및 **네트워크 연결 상태** 파악
- 네트워크 인터페이스 상태 정보  
  - a : 모든 연결들과 수신 포트 표시
  - n : 주소와 포트번호를 숫자형식으로 표시 
  - s : 프로토콜별 통계 표시 
  - r  : 라우팅 테이블 표시 
  - p : PID와 사용중인 프로그램명 출력 
  - t  : TCP 로 연결된 포트 표시 
  - u : UDP로 연결된 포트 표시 
  - y : 모든 연결에 대한TCP 연결 탬플릿 표시 
  - e : 이더넷 통계 표시 


## < cron > 
- crontab과 같이 데몬의 작업설정에 사용
- 작업 예약에 사용됨 

## < crontab > 
- 사용자별 설정된 작업 **스케쥴 관리 파일** 
- 0 10 * * 1 /etc/check.sh => 매주 월요일 오전 10시에 실행됨
  - (`분 시간 일 월 요일 작업내용` )순서의 구조를 가진다. 
  - 요일은 0,7이 일요일, 1이 월
  - u 사용자명 : 특정 사용자 작업 스케쥴 관리 
  - e : 지정된 시간에 설정한 명령들 출력 
  - l : 설정된 crontab 작업 스케쥴 출력
  - r : 현재 사용자의 crontab 삭제 


## < free > 
- **시스템 메모리 체크** 명령어 
- 캐시, 버퍼, 잔여, 사용중인 메모리 등의 용량 확인가능 

## < cat > 
- 파일 내용을 텍스트로 확인 
- more : 파일 내용을 한페이지씩 불러옴

## < find > 
- 특정 조건의 파일 및 디렉토리 검색에 이용 
  - name [지정이름] : 지정된 이름의 파일 찾음 
  - User [지정소유자] : 지정 소유자의 파일 찾음 
  - Type [bcdfls] : 지정 형식의 파일 찾음 ( d : 디렉토리, f : 파일 ) 
  - size [+n] : 지정된 크기의 파일 찾음
  - perm : 지정 소유자의 권한 고려해 파일 찾음
  - lnum [ip노드번호] : 지정 ip노드번호와 파일 찾음 
  - exec : 찾은 파일에 대한 지정된 명령 실행
  - Print : 표준출력으로 검색된 파일명 출력 
  - o : or 을 의미해 명령어 중간에 들어감 

- 예시 : find /user/local -name *.jpg -o -name icqa => 지정폴더경로에서 파일형식이 jpg이거나 파일명이  icqa 인 파일을 찾는다. 

## < perfmon : performance Monitor > 
- 성능 모니터를 이용해 일정한 주기로 특정 데이터를 수집
- 서버의 성능 분석에 사용 

## < dfrg : Disk Defragment > 
- 시스템 유틸리티로, 디스크 관리에 사용

## < stat > 
-  특정 파일 및 디렉토리 정보 확인하는 명령어 

## < lsblk > 
- ls + block device 
- 리눅스 **디바이스 정보 출력** 명령어 

## < lsattr > 
- ls + attribute 
- **파일 속성**을 확인하는 명령어 

## < mkfs : make file system > 
-  리눅스 파일 시스템(포맷) 만드는 명령어 

## < nohup : No Hang up > 
- Hang up : 끊다
- 프로세스가 백그라운드에서 계속 동작되도록 하는 명령어
- 사용자가 로그아웃 또는 터미널 종료되어도 실행중이던 프로세스를 중단하지 않고 백그라운드에서 계속 작업할 수 있도록 하는 명령어 

## < sleep >
- 일정시간동안 리눅스 시스템 잠들게함 

## < last > 
- 리눅스 시스템에 접속한 마지막 사용자 접속정보 확인하는 명령어 

## < lastb > 
- 비인가자의 로그인 실패 이력을 확인하는 명령어 

## < chage : Change Age > 
- 계정의 만료시간, 패스워드 관리 등의 **계정 정보를 변경**하는 명령어
  - m 2 : 비밀번호 변경 후 최소 사용일 2일로 설정
  - M 100 : 비밀번호 변경 후 최대 사용일 100일로 설정 
  - W 10 : 비밀번호 만료 10일전 경고 메시지 표시
  - I 10 : 비밀번호 만료 후 10일 지나면 계정 비활성화 
  - E 2021-12-25 : 해당 날짜에 계정 만료 
  - L 10 : 10일 후 계정 잠금 


## < chown > 
- **파일의 소유권**을 변경하는 명령어. Root권한 필요
- 파일의 접근권한을 변경 = chmod

## < chgrp > 
- 파일의 소유자 그룹을 변경

## < useradd > 
- 사용자 계정 생성 

## < usermod > 
- 사용자 관리 명령어로, 사용자 계정 변경할 때 사용 

## < xferlog > 
- ftp서버의 전송로그를 확인하는 명령어 

## < fdisk > 
- 설치된 하드디스크 타입과 정보를 확인하고 편집하는 명령어 
- 파티션테이블을 관리 

## < fsck > 
- 파일 시스템 상의 오류 체크 명령어


## < mount > 
- 리눅스 시스템에 마운트로 지정 
- unmount : 마운트 해제 

## < df >
- 마운트 정보 및 **디스크 사용량 점검**하는 명령어 

## < ps >
- **프로세스 상태**와 유효여부를 확인하는 명령어 
- 특정 서비스를 제공하는Demon 이 살아있는지 확인
- top : 실시간 프로세스 상태확인  

## < vi편집기 명령어 > 

1. 치환 명령어 
   1. :[범위]s/찾을문자열/바꿀문자열/[플레그]
   2. :10,20s/new/old/g 
   3. 10~20행 까지 new 문자를 old 문자로 모두 치환 (플래그 안쓰면 하나만 바뀜)

2. 삭제 
   1. :10,20r/new/old 
   2. 10~20행까지 삭제 후 new 대신 old삽입. 
   3. x : 곱하기로 글자 지움. 5x는 다섯글자 삭제 

## < chsh > 
- shell 변경 

## < touch > 
- 빈 파일 만들기 

## < free > 
- 메모리 사용 현황 

## < userdel > 
- 사용자 계정 삭제 

## < 파일 입력 및 출력 >
- ls -al > output.txt => ls -al결과를 파일로 저장 
- cat ## < /etc/passwd => 파일 내용을 출력 