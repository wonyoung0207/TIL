```
concurrent = 4
check_interval = 0
connection_max_age = "15m0s"
shutdown_timeout = 0

[session_server]
  session_timeout = 1800

[[runners]]
  name = "docker-compose-runner"
  url = "http://10.10.30.238:8980/"
  id = 30
  token = "glrt-ypLtGX5nK5v6paMzyPnm"
  token_obtained_at = 2025-07-28T00:02:23Z
  token_expires_at = 0001-01-01T00:00:00Z
  executor = "docker"
  cache_dir   = "/cache"     # ← 캐시 저장/복원 디렉토리 지정
  [runners.cache]
    Type = "directory"
    Path = "/cache"
    MaxUploadedArchiveSize = 0
    [runners.cache.s3]
    [runners.cache.gcs]
  [runners.docker] # Job Container 설정
    tls_verify   = false
    image        = "docker:20-dind"
    privileged   = true
    volumes      = [
      "/var/run/docker.sock:/var/run/docker.sock",
      "runner-cache:/cache"        # Job 컨테이너 캐시 전용 볼륨 마운트(로컬호스트와 매핑)
    ]
    shm_size     = 0

```

```
version: "3.7"

services:
  gitlab-runner:
    image: gitlab/gitlab-runner:latest
    container_name: gitlab-runner
    restart: always
    volumes:
      - './config:/etc/gitlab-runner'                # Runner 설정
      - '/var/run/docker.sock:/var/run/docker.sock'  # Docker-in-Docker
      - '/mnt/c/metabuild/build/backend:/output/backend'
      - '/mnt/c/metabuild/build/frontend:/output/frontend'
      - 'runner-cache:/cache'                        # 캐시 전용 볼륨
    command: >
      register
      --non-interactive
      --locked=false
      --name p1
      --executor docker
      --url http://10.10.30.238:8980/
      --registration-token $REGISTRATION_TOKEN
      --docker-image docker:20-dind
      --docker-volumes /var/run/docker.sock:/var/run/docker.sock
      --docker-volumes /mnt/c/metabuild/build/backend:/output/backend
      --docker-volumes /mnt/c/metabuild/build/frontend:/output/frontend
      --docker-volumes runner-cache:/cache

volumes:
  runner-cache:

```



## 250811

```
concurrent = 4
check_interval = 0
connection_max_age = "15m0s"
shutdown_timeout = 0

[session_server]
  session_timeout = 1800

[[runners]]
  name = "docker-compose-runner"
  url = "http://10.10.30.238:8980/"
  id = 30
  token = "glrt-ypLtGX5nK5v6paMzyPnm"
  token_obtained_at = 2025-07-28T00:02:23Z
  token_expires_at = 0001-01-01T00:00:00Z
  executor = "docker"
  cache_dir   = "/cache"     # ← 캐시 저장/복원 디렉토리 지정
  [runners.cache]
    Type = "directory"
    Path = "/cache"
    MaxUploadedArchiveSize = 0
    [runners.cache.s3]
    [runners.cache.gcs]
  [runners.docker] # Job Container 설정
    tls_verify   = false
    image        = "docker:20-dind"
    privileged   = true
    volumes      = [
      "/var/run/docker.sock:/var/run/docker.sock",
      "/cache",        # Job 컨테이너 캐시 전용 볼륨 마운트(로컬호스트와 매핑)
      "/mnt/c/metabuild/build/backend:/output/backend",
      "/mnt/c/metabuild/build/frontend:/output/frontend"
    ]
    shm_size     = 0


```

```
version: "3"

services:
  gitlab-runner-register:
    container_name: gitlab-runner-register
    image: gitlab/gitlab-runner:latest
    restart: "no"
    volumes: # Host 와 runner 컨테이너 간 연결 
      - './config:/etc/gitlab-runner'               # Runner 설정 파일
      - '/var/run/docker.sock:/var/run/docker.sock' # Docker-in-Docker
      - '/mnt/c/metabuild/build/backend:/output/backend'
      - '/mnt/c/metabuild/build/frontend:/output/frontend'
      - './runner-cache:/cache'                       # 캐시 전용 볼륨
    command: >
      gitlab-runner register
      --non-interactive
      --url http://10.10.30.238:8980/
      --registration-token $REGISTRATION_TOKEN
      --executor docker
      --docker-image docker:20-dind
      --locked=false
      --name p2
      --docker-volumes /var/run/docker.sock:/var/run/docker.sock
      --docker-volumes /mnt/c/metabuild/build/backend:/output/backend
      --docker-volumes /mnt/c/metabuild/build/frontend:/output/frontend
      --docker-volumes /home/meta/git-runner/runner-cache:/cache # Job 컨테이너와 Host 간 볼륨 설정 
    environment:
      - REGISTRATION_TOKEN=glrt-ypLtGX5nK5v6paMzyPnm
networks:
  docker-network:

```

```

docker ps -a --filter volume=470883f34773bbbaf390dd80950a6bbf844a21b0f229580b18e0a1c991ac31d5 --format "table {{.ID}}\t{{.Names}}\t{{.Status}}"
```

