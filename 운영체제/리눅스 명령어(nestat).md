# 리눅스 명령어 nestat

> [참고 사이트1](https://byounghee.tistory.com/191)
>
> [참고 사이트2](https://solog4something.tistory.com/9)
>
> [참고 사이트3](https://mainia.tistory.com/5378)

---

## NESTAT

### 정의

- 자신의 컴퓨터와 연결된 모든 네트워크 연결을 보여주는 명령어
  - 사용자 컴퓨터의 네트워크 상태를 알 수 있다. 
  - 윈도우에서 포트 확인을 위해 많이 이용한다. 
- 어떤 포트가 열려 있고 어떻게 사용되고 있는지 모두 알 수 있으며, 해킹 시도가 있거나 자신의 컴퓨터가 좀비 PC 인지 확인도 가능하다. 

### netstat에서 자주 사용되는 옵션(-a, -n, -o)

- **-a** : 모든 포트를 표시해준다.
- **-n** : "IP주소:포트" 형태로 보여준다.
  - ex) 192.168.0.100:8080
- **-o** : PID(프로세스ID)를 표시해준다.

### 모든 옵션

| 옵션        | 기능                                                     |
| ----------- | -------------------------------------------------------- |
| -a          | 모든 연결 및 수신 대기 포트를 표시한다.                  |
| -c          | 현재 실행 명령을 매 초마다 실행한다.                     |
| -l          | LISTEN 하고 있는 포트를 보여 준다.                       |
| -t          | TCP 로 연결된 포트를 보여 준다.                          |
| -u          | UDP 로 연결된 포트를 보여 준다.                          |
| -n          | 주소나 포트 형식을 숫자로 표현한다.                      |
| -p 프로토콜 | 해당 프로세스를 사용하고 있는 프로그램 이름을 보여 준다. |
| -r          | 라우팅 테이블을 보여 준다.                               |

### 보는 방법

- **프로토콜 :** 사용한 프로토콜
- **로컬 주소 :** 열려 있는 사용자 컴퓨터의 IP/호스트네임과 포트 번호
- **외부 주소 :** 사용자의 컴퓨터에 접속되어 있는 IP/호스트네임과 포트 번호
- **상태 :** 연결 상태

### 상태값 

<img src="./images/netstat.png" width="500"

| 상태            | 내용                                                         |
| --------------- | ------------------------------------------------------------ |
| **LISTEN**      | 연결 요구를 기다리는 상태, 포트가 열려 있음                  |
| **ESTABLISHED** | 서로 연결되어 있는 상태                                      |
| SVN_SENT        | 클라이언트가 서버에 SYN 패킷을 보내고 연결을 요청한 상태     |
| SVN_RECV        | 서버가 클라이언트의 SYN 패킷으로 요청을 받은 후 응답으로 SYN/ACK 패킷을 보내고 클라이언트에게 ACK 를 받기 위해 기다리는 상태 |
| TIME_WAIT       | 이미 해당 사이트와 연결이 종료되었거나 다음 연결을 위해 기다리는 상태 |
| CLOSE_WAIT      | 원격의 연결 요청을 받고 연결이 종료되길 기다리는 상태        |
| LAST_ACK        | 연결이 종료되었고 승인을 기다리는 상태                       |
| CLOSED          | 완전히 연결이 종료된 상태                                    |

### 자주 사용되는 명령어

```cmd
# 현재 컴퓨터에 연결된 모든 네트워크와 상태를 보여줌 
netstat

# 특정 포트를 검색 
netstat –ano | find “port번호” 

# 사용중인 포트 죽이기 
# f : 강제 죽이기 
taskkill /f /pid “port번호” 

```

