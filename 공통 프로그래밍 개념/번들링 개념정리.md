# 번들링 개념정리

---

>[웹팩 공식사이트](https://webpack.js.org/)

## 번들링

#### 정의

1. 웹 애플리케이션에서 사용하는 여러 자바스크립트, CSS, 이미지 등의 **파일을 하나로 묶어 최적화하는 과정**이다. 
2. 즉, **파일의 크기와 개수를 줄여 브라우저가 애플리케이션을 빠르게 로드하고 실행**할 수 있도록 하는 과정이다. 

#### 번들링의 필요성

1. 현대적인 웹 애플리케이션에서는 코드가 여러 개의 모듈로 나뉘어 구성되는데, 
   1. 각 모듈은 특정 기능을 수행하는 작은 코드 조각들로, 유지보수와 재사용성을 높인다. 
2. 그러나 이렇게 나뉜 파일들을 브라우저가 개별적으로 로드하면 네트워크 요청이 많아지고, 성능이 떨어질 수 있다.
3. 따라서 번들링을 통해 해당 문제점들을 개선할 수 있다. 

#### 번들링 수행 작업

1. **코드 병합**
   1. 여러 개의 자바스크립트와 CSS 파일을 하나 또는 여러 청크로 병합하여 HTTP 요청 수를 줄인다.
2. **파일 크기 축소**
   1. `minification` 및 `uglification`을 통해 코드에서 불필요한 공백, 주석 등을 제거하여 파일 크기를 줄인다. 
3. **코드 스플리팅**
   1. **필요한 시점에만 로드**될 수 있도록 코드를 분할하여 초기 로드 시간을 줄이고, 나중에 **필요한 부분만 로드**할 수 있다.
   2. 모든 코드를 한 번에 묶기보다는, **코드 스플리팅**(Code Splitting)으로 필요한 시점에만 특정 코드가 로드되도록 한다. 

```js
// 번들링 전
// math.js
export function add(a, b) {
  return a + b;
}

// greet.js
export function greet(name) {
  return `Hello, ${name}`;
}

// app.js
import { add } from './math';
import { greet } from './greet';

console.log(add(2, 3));
console.log(greet('Alice'));
```

```js
// bundle.js (번들링된 파일)
function add(a, b) {
  return a + b;
}

function greet(name) {
  return `Hello, ${name}`;
}

console.log(add(2, 3));
console.log(greet('Alice'));
```

## 번들링 종류

#### Vite 

1. 개발 중에는 번들링하지 않고 ESM을 이용해 브라우저가 모듈을 직접 가져오게 한다.
2. 즉, 개발 중에는 번들링을 건너뛰고, 프로덕션에서는 `Rollup`으로 **필요한 파일만 번들링**한다. 

#### Webpack

1. 모든 파일을 처음부터 번들링한다. 
2. 즉, **모든 파일을 번들링**하고, 코드 스플리팅과 같은 고급 기능을 통해 성능을 최적화한다. 

#### 차이점 정리

| 기능             | Vite                                               | vue-cli-service                           |
| ---------------- | -------------------------------------------------- | ----------------------------------------- |
| 개발 서버 속도   | 빠름 (ESM 기반, 번들링 없음)                       | 상대적으로 느림 (웹팩 번들링)             |
| 번들링 방식      | ESM (개발), Rollup (프로덕션)                      | 웹팩 (개발 및 프로덕션)                   |
| 설정             | 간단하고 직관적 (vite.config.js)                   | 유연하지만 복잡할 수 있음 (vue.config.js) |
| 폴리필 및 호환성 | 최신 브라우저 지원, 구형 브라우저는 수동 설정 필요 | 구형 브라우저 호환성 기본 제공            |
| 플러그인         | Vite 전용 플러그인 시스템                          | 웹팩 플러그인 호환                        |
| 프로덕션 빌드    | Rollup                                             | 웹팩                                      |

## webpack.config.js

1. 개념

   1. 웹팩이 번들링시 가장 먼저 참조하는 파일

2. 구조 

   1. entry
      1. 진입점
   2. output
      1. 번들링 파일 생성 위치 

   ```js
   const path = require('path');
   
   module.exports = {
     entry: './src/index.js', // 번들링 파일 
     output: {
       filename: 'main.js', // 번들링된 파일 이름 
       path: path.resolve(__dirname, 'dist'), // 번들링 파일 저장 위치 
     },
   };
   ```

   