# 멀티 스레딩 

---

>[참고 사이트1](https://tcpschool.com/java/java_thread_multi)

## 멀티 스레딩

### 정의

- **하나의 프로세스 내**에서 **둘 이상의 스레드가 동시에 작업**을 수행하는 것을 의미
- 각 스레드는 독립적으로 실행되기 때문에 서로 다른 작업을 병렬로 처리

### 특징 

1. 응답성
   - 작업을 여러 개의 스레드로 분할하여 동시에 처리할 수 있기 때문에 작업을 빠르게 처리하여 응답 시간을 단축
   - 또한 백그라운드에서 작업을 처리하면서도 사용자의 입력을 기다리지 않고 응답할 수 있다. 
2. 병행성
   - 하나의 프로세서에서 여러 동작이 가능하도록 함 
   - CPU 및 다른 자원을 효율적으로 활용하여 작업을 동시에 진행하여 시스템의 성능을 최적화한다. 
     - 필요한 경우 데이터를 공유하면서 협력하여 작업을 진행할 수 있음. 

### 사용 이유 

1. 응답성과 병행성 측면에서 애플리케이션의 성능을 향상시킬 수 있다. 
2. 시스템 자원을 효과적으로 활용할 수 있다. 

### 문제점

1. 동시성을 다루는 과정에서 동기화와 관련된 문제들을 주의 깊게 다뤄야 한다. 
2. 스레드 간의 경쟁 조건(Race Condition), 교착상태(Deadlock), 스레드 안전성(Thread Safety) 등을 고려
3. 프로세스별로 스레드가 여려개 존재하며, 이 스레드 들은 CPU 실행을 두고 서로 경쟁한다. 
   - 문맥 교환이라고 하는 이 현상을 최대한 줄이는것이 운영체제의 성능을 높일 수 있는 방법이다. 

### 문맥 교환 ( Context Switch )

- **병행성**의 대가로써 스레드별로 CPU 실행을 두고 서로 경쟁하게 된다. 
  - CPU의 코어수는 스레드의 수로, 스레드가 이 수를 넘어갈 경우 스레드가 교체되는 문맥교환이 발생된다. 
  - 즉, **스레드 상태를 저장하고 복원하는 데 필요한 시간과 추가적인 오버헤드가 발생**하여 비용이 들어가는 작업이기 때문에 최소화하는 것이 애플리케이션의 성능을 높이는데 도움이 된다. 
- 하나의 프로세스는 여러개의 스레드를 가질 수 있다. 
  - 하나의 프로세스 안에 있는 스레드들은 **서로 자원을 공유**하여 다른 프로세스의 스레드와 컨텍스트 스위치가 일어나는 것보다 **효율적으로 동작**한다. 
  - 만약 문맥교환이 일어나야 한다면 다른 프로세스의 스레드가 아닌 같은 프로세스의 스레드와 하는것이 성능에 도움이 된다. 