# Iot Network

---

> iot 네트워크 개념정리 
>
> OSI 7계층 

## Iot Network

### 정의

- Iot 의 4가지 요소중 연결로, 데이터의 전송 및 요청하는 부분을 의미한다. 

### 구조

1. 사물 ( Senser )
2. 네트워크 ( 게이트웨이 )
3. 애플리케이션 ( 애플리케이션 및 Cloud )

---

## 통신 프로토콜

### 프로토콜 

- 규약 또는 약속 

### 통신 프로토콜 

- 서로가 정보교환하기 위해 필요한 약속 
- 따라서 **통신을 원하는 서로 다른 시스템**에 존재하는 두 기기들 간에 **언제 어떻게 무엇을 통신**할 것인가에 대해 **서로 약속한 운영규범**이다. 
- CSMA라는 프로토콜로부터 생성된 것을 표준기관이 표준으로 삼아 IEEE 통신 프로토콜이 생성되었다. 

### 기능 

1. 흐름제어
   - 송수신 사이에 전송되는 패킷의 양이나 속도 규제 
2. 에러제어
   - 전송중 발생하는 오류 검출해 파손 대비 
3. 동기화
   - 송수신 측이 같은 상태를 유지하도록 타이밍 맞춤
4. 순서제어
   - 전송 데이터 블록에 전송 순서 부여 
5. 주소지정 
   - 서로 IP 주소 알아야 통신 가능
6. 다중화
   - 한개의 통신 회선을 여러 가입자들이 동시에 사용하도록 함 
7. 경로제어
   - 어느쪽으로 가야 빠른지 결정 
8. 단편화와 재결합
   - 사이즈가 큰 데이터를 쪼갠 상태로 전송해서 다시 순서에 맞게 결합해야함
9. 캡슐화
   - 프로토콜 제어 정보의 정보를 부가하는 기능 
10. 우선순위 제어 
    - 특별한 경우로, 먼저 보낼 데이터를 순위를 매겨 보내는 것 

### OSI 7 계층

- 다른 시스템 간의 원할한 통신을 위해 국제 표준화 기구 ISO에서 제안한 통신 규약 
- 장치간의 데이터 통신시 필요한 장비 및 처리방법 등을 7계층으로 표준화하여 규정

#### 계층 

##### 1계층 

- **물리** 
- 두 기기를 무선, 유선,가시광 등의 **물리적 매체를 통해 연결**하고 ,송신하기 위해 **신호를 전기적 신호로 변환**하는 역할

##### 2계층

- **데이터 링크**
- Mac 주소로 장치를 식별하고 물리적으로 직접 연결된 **노드 간(Point-to-Point) 연결을 보장**

##### 3계층

- **네트워크**
- 장치간 논리적 **IP주소로 식별**하고, 패킷을 발신지로부터 여러 링크를 통해 목적지 까지 전달하기 위한 **경로 설정**

##### 4계층

- **전송**
- **종단간(End-to-End) 데이터 전송 방식**에 대한 계층으로, 프로토콜에 따라 신뢰성에 차이가 있을 수 있음 (TCP/UDP 개념사용)

##### 5계층

- **세션**
- **애플리케이션 사이의 연결**을 설정, 관리 , 해제하는 기능을 **담당** 

##### 6계층

- **표현**
- 데이터 표현양식 제공, 통신 및 사용자에게 맞는 변환(인코딩, 압축, 암호화 등) 을 담당

##### 7계층

- **응용**
- 웹 HTTP가 응용계층임
- 사용자가 네트워크에 접근할 수 있도록 하는 **사용자 인터페이스를 제공**하고, 전자우편, 원격파일 전송, DB관리 등의 **응용서비스 제공** 

##### 정리 

- 1~4 계층을 하위계층 , 5~7 계층을 상위계층 이라고 한다. 
  - **상위계층**은 사용자에 따라 **존재 유무가 결정**되고**, 하위계층**은 **변하지 않는 구간**이다. 
- 계층을 내려가며 **Data의 Header 부분에 정보가 추가**되고 , 계층을 올라가며 해더읽어서 처리한다. 
  - 따라서 **계층을 이동하며 해더의 정보를 추가 및 읽어 데이터가 올바르게 전달될 수 있도록 한다.** 
- 7계층이 사용자와 상호작용하는 곳이다. 

### 단점

- HTTP 프로토콜은 많은 전력과 큰 사이즈의 메모리 등 물리적 리소스가 풍부한 장치들을 고려하여 개발되었다. 
  - 따라서 **HTTP 프로토콜**을 이용한 데이터 전달방식은 **큰 사이즈의 Header가 붙어 데이터가 무거워진다.** 
- 무거운 HTTP 프로토콜이 아닌 Iot만의 통신 프로토콜이 필요해졌다. 
  - **Iot**는 간단한 전달을 위해 **CoAP와 MQTT 프로토콜을 사용**한다. 
