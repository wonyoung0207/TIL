# 스트리밍 전송 방식 HLS 

---

>

## HLS ( HTTP Live Streaming )

### 정의

-  Apple에서 개발한 스트리밍 프로토콜로, 주로 동영상 및 오디오 콘텐츠를 인터넷을 통해 실시간으로 전송하는 데 사용된다. 
-  **대표적인 HTTP 기반의 스트리밍 방식**으로, 다양한 플랫폼과 장치에서 지원되며, 특히 iOS 기기에서 널리 사용된다. 

### 장점

1. HTTP 기반
   - **HTTP 프로토콜을 사용**하기 때문에 대부분의 네트워크 환경에서 동작하며, **방화벽 및 프록시 서버에서도 문제 없이 작동**한다. 
2. 동적 비디오 조정
   - **비디오를 작은 청크로 분할**하고, 클라이언트 측에서 비디오의 품질과 비트레이트를 동적으로 조정하여 네트워크 상태에 따라 최적의 성능을 제공한다. 
3. 높은 호환성
   -  iOS 기기 및 Android 기기를 포함한 다양한 플랫폼과 장치에서 지원되므로 크로스 플랫폼 호환성이 높다. 

### 동작방법

1. 미디어 분할
   - 미디어를 **작은 청크(chunk)로 분할**한다. 
   - 일반적으로 10초에서 30초 사이의 짧은 시간 간격으로 청크를 생성한다.
   - 분할된 미디어는 **.ts 확장자를 가진 미디어 파일들로 저장**된다. 
2. 플레이리스트 생성
   - 서버는 .m3u8 확장자를 가진 **플레이리스트(Playlist) 파일을 생성**한다. 
   - 플레이리스트에는 **재생할 미디어 청크들의 URL이 나열**되어 있다. 
   - 플레이리스트 파일은 스트리밍 도중에도 업데이트될 수 있으며, 클라이언트는 이를 통해 다음 재생할 미디어 청크를 알 수 있다. 
3. 요청과 응답
   - 클라이언트는 .m3u8 플레이리스트 파일을 **HTTP 요청**하여 받아온다. 
   - 플레이리스트 파일에 나열된 **청크들의 URL을 다시 HTTP 요청**하여 해당 청크들을 다운로드한다. 
4. 버퍼링과 재생
   - 클라이언트는 받아온 청크들을 재생하기 위해 버퍼링 진행
   - 버퍼링을 통해 미디어가 일시적으로 중단되더라도 사용자는 부드러운 재생 경험을 얻을 수 있다.
5. 스트리밍 지속
   - 사용자가 미디어를 재생하고 있는 동안 서버는 계속해서 새로운 청크들을 생성하고 플레이리스트를 업데이트 한다. 
   - 이를 통해 스트리밍 서비스는 지속적으로 새로운 미디어를 제공하며, 사용자는 중간에 스트리밍 서비스를 종료하지 않는 이상 지속적으로 미디어를 수신할 수 있다. 
6. 네트워크 조건에 따른 적응 
   - 네트워크 조건에 따라 미디어의 품질을 조절할 수 있다. 
   - 사용자의 인터넷 연결 상태에 따라 최적의 품질로 미디어를 제공하고, 네트워크 변동이 발생해도 간단한 버퍼링을 통해 지연을 최소화한다. 

