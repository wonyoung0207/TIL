# GeoServer 지도 생성 방법

---

>

## 데이터 다운로드

1. 수치 지도 구하기
   1. 국토지리정보원(https://www.ngii.go.kr/kor/main.do)에서 행정구역>연속수치지형도(SHP)
2. 다운로드 파일 이름으로 연속수치지도 문서 참조
   - 도로, 경계선 등을 구분할 수 있음 

## QGIS 레이어 생성 

1. **차선생성**
   1. `"중앙선 레이어 선택 → 공간처리툴박스 → 오프셋(평행) 선의 배열"`
   2. 중앙선기준으로 차선 생성해야함 
      1. 중앙선을 기준으로 일정간격 선을 생성하는 방식
      2. 생성할 피처 수는 차선 중 가장 큰 숫자로 차선 선택
      3. 생성 간격 → 상행/하행은 음수로 구분 (3m / -3m)
2. **차선 상행/하행 레이어 병합하기**
   1. `"공간처리툴박스 → 벡터 레이어 병합 → 합칠 레이어 선택 후 병합" `
3. **불필요 차선 제거**
   1. `"편집 모드 → 선추가 곡선 으로 눈대중으로 만들기"`
   2. 교차로는 복잡해서 차선 다 지우고 시작
   3. ID 부여 할때 도킹 사용
4. **인도 폴리곤 생성**
   1. `"공간 처리 툴박스 → 라인을 폴리곤 변경(벡터 지오메트리)"`
   2. 수치지도의 인도(shp파일)는 선으로 되어서 폴리곤으로 변경해야함 
   3. 인도 생성 주의할점
      1. 인도선의 사이드 부분이 막혀있어야 폴리곤 변경 가능 
      2. 변경이 안된 폴리곤이 있다면 `"편집 모드 → 선추가(라인피처)"` 로 막고 다시 라인을 폴리곤으로 변경
5. **도로 질감 생성**
   1. `"공간처리툴박스 → 폴리곤 안에 랜덤포인트 생성 → 피처 별 포인트 갯수 1만개 설정 → 포인트 레이어 GeoServer 추가 → 스타일 적용" `
   2. 도로안에 많은 점을 생성하여 Geoserver에서 이미지를 입히는 방식
   3. 추후 다른 방법 서칭 필요

## QGIS 레이어 DB 저장 

1. `"QGIS 상단 탭 → 데이터베이스 → DB관리자 → PostGIS(영문 테이블명) → <기본키ID> 선택 후 저장 "`
2. 원본파일은 SHP파일로 유지(백업) → 데이터 손실될 수 있기 때문 
3. 편집할땐 DB에서 불러와서 작업
4. 저장시 좌표계 설정 꼭 필요 (WGS84)

## Geoserver

1. **서버 IP** 
2. **레이어 추가** 
   1. `"레이어 최소 경계 추가 → min, max 좌표계 체크박스 선택 후 완료"`
3. **스타일**
   1. `"프로젝트 저장소 수정 → 레이어 추가 → 레이어 목록 → 레이어 추가 →  레이어 선택 → 스타일(dotLine) 추가"`
   2. 스타일을 한번에 적용하려면 레이어 그룹만들기
4. **횡단보도**
   1. 축척 상관없이 크기 지정 
   2. sld 쿼리 → size 3m 로 지정
5. **어린이보호구역**
   1. 인터넷 지도 사용 
6. 서비스 발행
7. 작업공간추가
8. 저장소 추가

## 팁

1. 지도가 너무 크면 분할로 QGIS프로젝트에서 나누던가 DB 테이블에서 나눔
2. DB 넣을때 좌표계 정해서 넣기
3. SLD 표준 스타일 찾아보기